<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" th:fragment="html(title, content, head)"><head><meta name="default-theme" th:content="${theme.config.basic.defaultTheme ?: 'dark'}" /> <script>(function(){var meta=document.querySelector('meta[name="default-theme"]');var defaultTheme=(meta&&meta.content)||'dark';var scheme=localStorage.getItem('color-scheme');if(!scheme||scheme==='auto'){scheme=defaultTheme;}document.documentElement.setAttribute('data-theme',scheme);document.documentElement.setAttribute('data-default-theme',defaultTheme);})();</script> <script>(function(){var welcomed=sessionStorage.getItem('serenity-welcomed');if(!welcomed){document.write('<style id="welcome-init-style">.header,.footer,.back-to-top,.page-gradient,.hero-background{opacity:0!important;visibility:hidden!important}body{overflow:hidden!important}.welcome-overlay{display:flex!important}<\/style>');}else{document.write('<style id="welcome-init-style">.welcome-overlay{display:none!important}<\/style>');}})();</script> <meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Halo" /><title th:text="${title != null ? title + ' - ' + (theme.config.basic.title ?: site.title) : (theme.config.basic.title ?: site.title)}">Serenity-Grace</title><meta name="description" th:content="${theme.config.basic.description ?: site.subtitle}" /><meta th:if="${theme.config.seo != null && theme.config.seo.keywords != null && !#strings.isEmpty(theme.config.seo.keywords)}" name="keywords" th:content="${theme.config.seo.keywords}" /><meta th:if="${theme.config.seo != null && theme.config.seo.baiduSiteVerification != null && !#strings.isEmpty(theme.config.seo.baiduSiteVerification)}" name="baidu-site-verification" th:content="${theme.config.seo.baiduSiteVerification}" /><meta th:if="${theme.config.seo != null && theme.config.seo.googleSiteVerification != null && !#strings.isEmpty(theme.config.seo.googleSiteVerification)}" name="google-site-verification" th:content="${theme.config.seo.googleSiteVerification}" /><link rel="icon" th:href="${theme.config.basic.favicon != null && !#strings.isEmpty(theme.config.basic.favicon) ? theme.config.basic.favicon : (site.favicon != null && !#strings.isEmpty(site.favicon) ? site.favicon : '/themes/theme-Serenity/assets/public/ics6.webp')}" /><link rel="stylesheet" th:href="@{/assets/fonts/qweather-icons.css}" /><link rel="preload" th:href="@{/assets/css/base.css}" as="style" /><link rel="stylesheet" th:href="@{/assets/css/lenis.css}" /><link rel="stylesheet" th:href="@{/assets/css/aos.css}" /><link rel="stylesheet" th:href="@{/assets/css/swiper-bundle.min.css}" /> <style>@keyframes aos-fallback{to{opacity:1;transform:none}}[data-aos]{animation:aos-fallback 0s 3s forwards}.aos-initialized [data-aos]{animation:none}</style> <link rel="stylesheet" th:href="@{/assets/css/base.css}" /><link rel="stylesheet" th:if="${theme.config.welcome == null || theme.config.welcome.enabled == null || theme.config.welcome.enabled}" th:href="@{/assets/css/welcome.css}" /><th:block th:replace="${head}" /><th:block th:utext="${theme.config.basic.customHead}" /> <script th:if="${theme.config.seo != null && (theme.config.seo.enableJsonLd == null || theme.config.seo.enableJsonLd)}" type="application/ld+json" th:inline="javascript">{"@context":"https://schema.org","@type":"WebSite","name":"Serenity's Blog","url":"","description":"","author":{"@type":"Person","name":"Serenity"}}</script> </head><body><div class="welcome-overlay" id="welcomeOverlay" th:if="${theme.config.welcome == null || theme.config.welcome.enabled == null || theme.config.welcome.enabled}"><button class="welcome-theme-toggle" id="welcomeThemeToggle" title="切换主题"><svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg><svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg></button><div class="welcome-content"><div class="welcome-logo-wrapper"><img th:src="${theme.config.hero.avatar ?: '/themes/theme-Serenity/assets/public/ics6.webp'}" alt="Logo" class="welcome-logo" /><div class="welcome-logo-ring"></div><div class="welcome-logo-ring welcome-logo-ring-2"></div></div><h1 class="welcome-title" th:text="${theme.config.hero.name ?: site.title}" th:style="${theme.config.hero.nameColor != null and !#strings.isEmpty(theme.config.hero.nameColor) ? 'background:' + theme.config.hero.nameColor + ';-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent' : ''}">Serenity</h1><p class="welcome-tagline" th:text="${theme.config.hero.tagline ?: '热爱可抵岁月漫长'}" th:style="${theme.config.hero.taglineColor != null and !#strings.isEmpty(theme.config.hero.taglineColor) ? (#strings.contains(theme.config.hero.taglineColor, 'gradient') ? 'background:' + theme.config.hero.taglineColor + ';-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent' : 'color:' + theme.config.hero.taglineColor) : ''}">热爱可抵岁月漫长</p><p class="welcome-bio" th:text="${theme.config.hero.bio ?: '专注于前端开发，热爱开源，喜欢分享技术与生活。'}" th:style="${theme.config.hero.bioColor != null and !#strings.isEmpty(theme.config.hero.bioColor) ? (#strings.contains(theme.config.hero.bioColor, 'gradient') ? 'background:' + theme.config.hero.bioColor + ';-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent' : 'color:' + theme.config.hero.bioColor) : ''}">专注于前端开发，热爱开源，喜欢分享技术与生活。</p><div class="welcome-particles" id="welcomeParticles"></div></div><div class="welcome-mascot-wrapper" th:if="${theme.config.welcome == null || theme.config.welcome.showMascot == null || theme.config.welcome.showMascot}"><div class="welcome-mascot-bubble" id="welcomeMascotBubble"><span class="bubble-text">点击任意处进入哦~</span><div class="bubble-tail"></div></div><div class="welcome-mascot-row"><div class="welcome-mascot" id="welcomeMascot"><img th:src="${theme.config.welcome != null && theme.config.welcome.mascotDark != null && !#strings.isEmpty(theme.config.welcome.mascotDark) ? theme.config.welcome.mascotDark : '/themes/theme-Serenity/assets/images/welcome/babara.gif'}" alt="" class="welcome-mascot-img welcome-mascot-dark" /><img th:src="${theme.config.welcome != null && theme.config.welcome.mascotLight != null && !#strings.isEmpty(theme.config.welcome.mascotLight) ? theme.config.welcome.mascotLight : '/themes/theme-Serenity/assets/images/welcome/kirara.gif'}" alt="" class="welcome-mascot-img welcome-mascot-light" /></div><a th:if="${theme.config.welcome == null || theme.config.welcome.mascotCredit == null || !#strings.isEmpty(theme.config.welcome.mascotCredit)}" th:href="${theme.config.welcome != null && theme.config.welcome.mascotCredit != null ? theme.config.welcome.mascotCredit : 'https://x.com/Seseren_kr'}" target="_blank" rel="noopener" class="welcome-mascot-credit" title="GIF Source"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a></div></div></div> <script th:if="${theme.config.welcome != null and theme.config.welcome.sayings != null and !#strings.isEmpty(theme.config.welcome.sayings)}" th:inline="javascript">window.WELCOME_SAYINGS='';window.WELCOME_SAYINGS=window.WELCOME_SAYINGS.split('\n').filter(function(s){return s.trim();});</script> <div class="page-transition" id="page-transition"><div class="page-transition-spinner"><span></span></div><div class="page-transition-text">正在跳转...</div></div><div class="page-gradient"></div><th:block th:replace="~{modules/header}"></th:block><th:block th:replace="~{modules/search-modal}"></th:block><main class="main" id="pjax-container"><th:block th:replace="${content}" /></main><th:block th:replace="~{modules/footer}"></th:block><th:block th:if="${theme.config.music != null && theme.config.music.enabled && theme.config.music.playlistId != null && !#strings.isEmpty(theme.config.music.playlistId)}"><link rel="stylesheet" th:href="@{/assets/css/APlayer.min.css}" /><link rel="stylesheet" th:href="@{/assets/css/music-panel.css}" /> <script th:if="${theme.config.music.metingApi != null && !#strings.isEmpty(theme.config.music.metingApi)}" th:inline="javascript">var meting_api='';</script> <div id="nav-music"><a id="nav-music-hoverTips" class="nav-music-tips">播放音乐</a><meting-js th:id="${theme.config.music.playlistId}" server="netease" type="playlist" mutex="true" preload="none" data-lrctype="0" order="random"></meting-js></div><div id="music-panel" class="music-panel" style="display:none"><div class="music-panel-inner"><div class="mp-header"><div class="mp-cover"><img id="mpCover" src="" alt="cover" /></div><div class="mp-song-info"><div class="mp-title" id="mpTitle">Sample Song</div><div class="mp-artist" id="mpArtist">Sample Artist</div><div class="mp-time"><span id="mpCurrent">0:00</span> / <span id="mpDuration">0:00</span></div></div><div class="mp-header-actions"><button class="mp-btn mp-btn-list" id="mpListToggle" title="播放列表"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg></button></div></div><div class="mp-list-area" id="mpListArea" style="display:none" data-lenis-prevent><ul class="mp-playlist" id="mpPlaylist"></ul></div><div class="mp-progress-wrap"><div class="mp-progress" id="mpProgress"><div class="mp-progress-played" id="mpPlayed"></div><div class="mp-progress-thumb" id="mpThumb"></div></div></div><div class="mp-controls"><button class="mp-btn mp-btn-mode" id="mpMode" title="播放模式"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 3 21 3 21 8"/><line x1="4" y1="20" x2="21" y2="3"/><polyline points="21 16 21 21 16 21"/><line x1="15" y1="15" x2="21" y2="21"/><line x1="4" y1="4" x2="9" y2="9"/></svg></button><button class="mp-btn mp-btn-prev" id="mpPrev" title="上一首"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg></button><button class="mp-btn mp-btn-play" id="mpPlay" title="播放/暂停"><svg class="mp-icon-play" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg><svg class="mp-icon-pause" viewBox="0 0 24 24" fill="currentColor" style="display:none"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg></button><button class="mp-btn mp-btn-next" id="mpNext" title="下一首"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg></button><button class="mp-btn mp-btn-loop" id="mpLoop" title="循环模式"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="17 1 21 5 17 9"/><path d="M3 11V9a4 4 0 0 1 4-4h14"/><polyline points="7 23 3 19 7 15"/><path d="M21 13v2a4 4 0 0 1-4 4H3"/></svg></button></div><div class="mp-footer"><button class="mp-btn mp-btn-vol" id="mpVolBtn" title="音量"><svg class="mp-icon-vol" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/></svg><svg class="mp-icon-mute" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" y1="9" x2="17" y2="15"/><line x1="17" y1="9" x2="23" y2="15"/></svg></button><div class="mp-volume-wrap"><div class="mp-volume-bar" id="mpVolumeBar"><div class="mp-volume-level" id="mpVolumeLevel"></div></div></div></div></div></div> <script th:src="@{/assets/js/APlayer.min.js}"></script> <script th:src="@{/assets/js/Meting2.min.js}"></script> </th:block><button class="back-to-top" id="back-to-top" aria-label="返回顶部"><svg class="back-to-top-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg><span class="back-to-top-text">TOP</span></button> <script th:src="@{/assets/js/lenis.min.js}" defer></script> <script th:src="@{/assets/js/swiper-bundle.min.js}" defer></script> <script th:src="@{/assets/js/aos.js}" defer></script> <script th:src="@{/assets/js/main.js}" defer></script> <script th:src="@{/assets/js/pjax.js}" defer></script> <script th:src="@{/assets/js/search.js}" defer></script> <script th:src="@{/assets/js/sidebar-sticky.js}" defer></script> <script th:if="${theme.config.welcome == null || theme.config.welcome.enabled == null || theme.config.welcome.enabled}" th:src="@{/assets/js/welcome.js}" defer></script> <th:block th:utext="${theme.config.basic.customScript}" /> <script>(function(){var el=document.getElementById('nav-music');if(!el)return;var tips=document.getElementById('nav-music-hoverTips');var panel=document.getElementById('music-panel');var ap=null;var playing=false;var panelOpen=false;var pauseFromPanel=false;var MIN_PANEL_WIDTH=260;function syncPanelWidth(){if(!panel||!el)return;var w=el.offsetWidth;if(w>=MIN_PANEL_WIDTH){panel.style.width=w+'px';}else{panel.style.width=MIN_PANEL_WIDTH+'px';}}var resizeObs=new ResizeObserver(function(){syncPanelWidth();});resizeObs.observe(el);function getAccentColor(){return getComputedStyle(document.documentElement).getPropertyValue('--color-accent').trim()||'#F596AA';}function applyThemeColor(inst){if(!inst)return;inst.theme(getAccentColor());}function musicToggle(changePlay){if(changePlay===undefined)changePlay=true;if(!ap)return;if(playing){el.classList.remove('playing');tips.textContent='播放音乐';playing=false;}else{el.classList.add('playing');el.classList.add('stretch');tips.textContent='暂停音乐';playing=true;}if(changePlay)ap.toggle();}function musicTelescopic(){if(el.classList.contains('stretch')){el.classList.remove('stretch');}else{el.classList.add('stretch');}}function openPanel(){if(!panel||panelOpen)return;panel.style.display='';void panel.offsetHeight;panel.classList.add('active');panelOpen=true;syncPanelState();}function closePanel(){if(!panel||!panelOpen)return;panel.classList.remove('active');panelOpen=false;panel.addEventListener('transitionend',function handler(){if(!panel.classList.contains('active'))panel.style.display='none';panel.removeEventListener('transitionend',handler);});}function togglePanel(){if(panelOpen)closePanel();else openPanel();}function fmtTime(s){if(!s||isNaN(s))return '0:00';s=Math.floor(s);var m=Math.floor(s / 60);var sec=s % 60;return m+':'+(sec<10?'0':'')+sec;}function syncPanelState(){if(!ap||!panelOpen)return;var audio=ap.audio;var cur=ap.list.audios[ap.list.index];var coverEl=document.getElementById('mpCover');if(coverEl&&cur)coverEl.src=cur.cover||'';var titleEl=document.getElementById('mpTitle');var artistEl=document.getElementById('mpArtist');if(titleEl&&cur)titleEl.textContent=cur.name||'Unknown';if(artistEl&&cur)artistEl.textContent=cur.artist||'Unknown';document.getElementById('mpCurrent').textContent=fmtTime(audio.currentTime);document.getElementById('mpDuration').textContent=fmtTime(audio.duration);var pct=audio.duration?(audio.currentTime / audio.duration*100):0;document.getElementById('mpPlayed').style.width=pct+'%';document.getElementById('mpThumb').style.left=pct+'%';var iconPlay=document.querySelector('.mp-icon-play');var iconPause=document.querySelector('.mp-icon-pause');if(iconPlay&&iconPause){iconPlay.style.display=ap.audio.paused?'':'none';iconPause.style.display=ap.audio.paused?'none':'';}document.getElementById('mpVolumeLevel').style.width=(ap.audio.volume*100)+'%';var volIcon=document.querySelector('.mp-icon-vol');var muteIcon=document.querySelector('.mp-icon-mute');if(volIcon&&muteIcon){volIcon.style.display=ap.audio.volume>0?'':'none';muteIcon.style.display=ap.audio.volume>0?'none':'';}}function renderPlaylist(){if(!ap)return;var ul=document.getElementById('mpPlaylist');if(!ul)return;ul.innerHTML='';ap.list.audios.forEach(function(song,i){var li=document.createElement('li');if(i===ap.list.index)li.classList.add('mp-list-active');li.innerHTML='<span class="mp-list-idx">'+(i+1)+'</span>'+'<span class="mp-list-name">'+(song.name||'Unknown')+'</span>'+'<span class="mp-list-artist">'+(song.artist||'')+'</span>';li.addEventListener('click',function(){ap.list.switch(i);ap.play();renderPlaylist();});ul.appendChild(li);});}function bindPanelEvents(){document.getElementById('mpPlay').addEventListener('click',function(){if(!ap.audio.paused)pauseFromPanel=true;ap.toggle();});document.getElementById('mpPrev').addEventListener('click',function(){ap.skipBack();setTimeout(function(){syncPanelState();renderPlaylist();},300);});document.getElementById('mpNext').addEventListener('click',function(){ap.skipForward();setTimeout(function(){syncPanelState();renderPlaylist();},300);});var modeBtn=document.getElementById('mpMode');modeBtn.addEventListener('click',function(){var cur=ap.options.order;var next=cur==='random'?'list':'random';var orderBtn=el.querySelector('.aplayer-icon-order');if(orderBtn)orderBtn.click();updateModeIcons();});var loopBtn=document.getElementById('mpLoop');loopBtn.addEventListener('click',function(){var loopIcon=el.querySelector('.aplayer-icon-loop');if(loopIcon)loopIcon.click();updateModeIcons();});document.getElementById('mpListToggle').addEventListener('click',function(){var listArea=document.getElementById('mpListArea');var btn=document.getElementById('mpListToggle');if(listArea.style.display==='none'){listArea.style.display='';btn.classList.add('active');renderPlaylist();}else{listArea.style.display='none';btn.classList.remove('active');}});var progressBar=document.getElementById('mpProgress');progressBar.addEventListener('click',function(e){var rect=progressBar.getBoundingClientRect();var pct=(e.clientX-rect.left)/ rect.width;pct=Math.max(0,Math.min(1,pct));if(ap.audio.duration){ap.seek(pct*ap.audio.duration);}});var volBar=document.getElementById('mpVolumeBar');volBar.addEventListener('click',function(e){var rect=volBar.getBoundingClientRect();var pct=(e.clientX-rect.left)/ rect.width;pct=Math.max(0,Math.min(1,pct));ap.volume(pct);syncPanelState();});var savedVol=0.7;document.getElementById('mpVolBtn').addEventListener('click',function(){if(ap.audio.volume>0){savedVol=ap.audio.volume;ap.volume(0);}else{ap.volume(savedVol);}syncPanelState();});}function updateModeIcons(){setTimeout(function(){var modeBtn=document.getElementById('mpMode');var loopBtn=document.getElementById('mpLoop');var orderIcon=el.querySelector('.aplayer-icon-order');var loopIcon=el.querySelector('.aplayer-icon-loop');if(orderIcon){var isRandom=orderIcon.querySelector('path')&&orderIcon.innerHTML.indexOf('random')>-1;modeBtn.classList.toggle('active',true);}if(loopIcon){loopBtn.classList.toggle('active',true);}},100);}var syncTimer=null;function startSync(){if(syncTimer)return;syncTimer=setInterval(function(){if(panelOpen){syncPanelState();}},500);}var observer=new MutationObserver(function(){if(ap)applyThemeColor(ap);});observer.observe(document.documentElement,{attributes:true,attributeFilter:['data-theme']});var checkInterval=setInterval(function(){var metingEl=el.querySelector('meting-js');if(metingEl&&metingEl.aplayer){clearInterval(checkInterval);ap=metingEl.aplayer;applyThemeColor(ap);var musicEl=el.querySelector('.aplayer-music');var btnEl=el.querySelector('.aplayer-button');if(musicEl)musicEl.addEventListener('click',function(){musicTelescopic();});if(btnEl)btnEl.addEventListener('click',function(){musicToggle(false);});ap.on('play',function(){if(!playing)musicToggle(false);syncPanelState();renderPlaylist();});ap.on('pause',function(){if(pauseFromPanel){pauseFromPanel=false;if(playing){el.classList.remove('playing');tips.textContent='播放音乐';playing=false;}syncPanelState();}else{if(playing){el.classList.remove('playing');el.classList.remove('stretch');tips.textContent='播放音乐';playing=false;}closePanel();}});ap.on('listswitch',function(){setTimeout(function(){syncPanelState();renderPlaylist();},200);});bindPanelEvents();startSync();}},500);tips.addEventListener('click',function(){if(!playing){musicToggle();openPanel();}else{musicToggle();}});el.addEventListener('dblclick',function(e){e.preventDefault();togglePanel();});el.addEventListener('click',function(e){if(e.target===tips||e.target.closest('.nav-music-tips'))return;if(e.target.closest('.aplayer-button'))return;if(playing){togglePanel();}});})();</script> </body></html>