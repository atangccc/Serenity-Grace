/**
 * Theme: theme-Serenity
 * Author: Serenity
 * Build: 2026-02-21 13:40:33
 * Fingerprint: a60e55b473a87906
 * Copyright © 2026 Serenity. All rights reserved.
 * Unauthorized copying or distribution is prohibited.
 */
(function(){'use strict';document.addEventListener('DOMContentLoaded',function(){initSignupPage();});function initSignupPage(){handleAlerts();const signupForm=document.querySelector('#signup-form')||document.querySelector('form[action*="signup"]');if(signupForm){signupForm.addEventListener('submit',function(){const submitBtn=signupForm.querySelector('button[type="submit"]');if(submitBtn){submitBtn.disabled=true;submitBtn.textContent='注册中...';}});}initPasswordStrength();styleEmailCodeButton();}function handleAlerts(){const alerts=document.querySelectorAll('.alert');alerts.forEach(function(alert){const text=alert.textContent.trim();if(!text)return;const isError=alert.classList.contains('alert-error');if(!isError)return;const formItem=alert.closest('.form-item')||alert.closest('.halo-form-wrapper');if(formItem&&typeof showToast==='function'){showToast(text,'error',formItem,5000);}});}function initPasswordStrength(){const passwordInput=document.getElementById('password');if(!passwordInput)return;const formItem=passwordInput.closest('.form-item');if(!formItem)return;const strengthIndicator=document.createElement('div');strengthIndicator.className='password-strength';strengthIndicator.innerHTML='<div class="strength-bar"><div class="strength-fill"></div></div><span class="strength-text"></span>';formItem.appendChild(strengthIndicator);passwordInput.addEventListener('input',function(){const strength=calculatePasswordStrength(this.value);updateStrengthIndicator(strengthIndicator,strength);});}function calculatePasswordStrength(password){let score=0;if(!password)return{score:0,text:'',level:''};if(password.length>=8)score+=1;if(password.length>=12)score+=1;if(/\d/.test(password))score+=1;if(/[a-z]/.test(password))score+=1;if(/[A-Z]/.test(password))score+=1;if(/[^a-zA-Z0-9]/.test(password))score+=1;let text,level;if(score<=2){text='弱';level='weak';}else if(score<=4){text='中';level='medium';}else{text='强';level='strong';}return{score:score,text:text,level:level};}function updateStrengthIndicator(indicator,strength){const fill=indicator.querySelector('.strength-fill');const text=indicator.querySelector('.strength-text');if(!strength.level){indicator.style.display='none';return;}indicator.style.display='flex';fill.className='strength-fill '+strength.level;fill.style.width=(strength.score / 6*100)+'%';text.textContent=strength.text;text.className='strength-text '+strength.level;}function styleEmailCodeButton(){const emailCodeBtn=document.getElementById('emailCodeSendButton');if(!emailCodeBtn)return;emailCodeBtn.classList.add('sepo-email-code-btn');const loadingIcon='<svg class="sepo-btn-icon sepo-spin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><circle cx="12" cy="12" r="10" stroke-opacity="0.3"/><path d="M12 2a10 10 0 0 1 10 10" stroke-linecap="round"/></svg>';const successIcon='<svg class="sepo-btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" width="18" height="18"><polyline points="20 6 9 17 4 12"/></svg>';const observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){if(mutation.type==='childList'||mutation.type==='characterData'){const currentText=emailCodeBtn.textContent.trim();if(currentText.includes('发送中')||currentText.includes('sending')){emailCodeBtn.innerHTML=loadingIcon;emailCodeBtn.classList.add('sepo-btn-loading');emailCodeBtn.classList.remove('sepo-btn-success');}else if(currentText.includes('发送成功')||currentText.includes('success')){emailCodeBtn.innerHTML=successIcon;emailCodeBtn.classList.add('sepo-btn-success');emailCodeBtn.classList.remove('sepo-btn-loading');setTimeout(function(){observer.disconnect();setTimeout(function(){observer.observe(emailCodeBtn,{childList:true,characterData:true,subtree:true});},100);},1500);}else if(/\d+/.test(currentText)&&currentText.includes('秒')){emailCodeBtn.classList.remove('sepo-btn-loading','sepo-btn-success');}else if(currentText&&!currentText.includes('<svg')){emailCodeBtn.classList.remove('sepo-btn-loading','sepo-btn-success');}}});});observer.observe(emailCodeBtn,{childList:true,characterData:true,subtree:true});}})();